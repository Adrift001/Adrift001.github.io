<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="theme-color" content="#222">
    <meta name="generator" content="Hexo 3.9.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.0">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.0">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.0">
    <link rel="mask-icon" href="/images/logo.svg?v=7.4.0" color="#222">
    <link rel="stylesheet" href="/css/main.css?v=7.4.0">
    <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
    <script id="hexo-configurations">
      var NexT = window.NexT || {};
      var CONFIG = {
        root: '/',
        scheme: 'Pisces',
        version: '7.4.0',
        exturl: false,
        sidebar: {
          "position": "left",
          "display": "post",
          "offset": 12,
          "onmobile": false
        },
        copycode: {
          "enable": true,
          "show_result": true,
          "style": null
        },
        back2top: {
          "enable": true,
          "sidebar": false,
          "scrollpercent": true
        },
        bookmark: {
          "enable": false,
          "color": "#222",
          "save": "auto"
        },
        fancybox: true,
        mediumzoom: false,
        lazyload: true,
        pangu: false,
        algolia: {
          appID: '',
          apiKey: '',
          indexName: '',
          hits: {
            "per_page": 10
          },
          labels: {
            "input_placeholder": "Search for Posts",
            "hits_empty": "We didn't find any results for the search: ${query}",
            "hits_stats": "${hits} results found in ${time} ms"
          }
        },
        localsearch: {
          "enable": true,
          "trigger": "auto",
          "top_n_per_article": 1,
          "unescape": false,
          "preload": false
        },
        path: 'search.xml',
        motion: {
          "enable": true,
          "async": false,
          "transition": {
            "post_block": "fadeIn",
            "post_header": "slideDownIn",
            "post_body": "slideDownIn",
            "coll_header": "slideLeftIn",
            "sidebar": "slideUpIn"
          }
        },
        translation: {
          copy_button: '复制',
          copy_success: '复制成功',
          copy_failure: '复制失败'
        },
        sidebarPadding: 40
      };
    </script>
    <meta name="keywords" content="Optional Swift">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Optional Blog">
    <meta property="og:url" content="https://jingxuetao.com/page/6/index.html">
    <meta property="og:site_name" content="Optional Blog">
    <meta property="og:locale" content="zh-CN">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Optional Blog">
    <link rel="canonical" href="https://jingxuetao.com/page/6/">
    <script id="page-configurations">
      // https://hexo.io/docs/variables.html
      CONFIG.page = {
        sidebar: "",
        isHome: true,
        isPost: false,
        isPage: false,
        isArchive: false
      };
    </script>
    <title>Optional Blog</title>
    <noscript>
      <style>
        .use-motion .brand,
        .use-motion .menu-item,
        .sidebar-inner,
        .use-motion .post-block,
        .use-motion .pagination,
        .use-motion .comments,
        .use-motion .post-header,
        .use-motion .post-body,
        .use-motion .collection-header {
          opacity: initial;
        }
        .use-motion .logo,
        .use-motion .site-title,
        .use-motion .site-subtitle {
          opacity: initial;
          top: initial;
        }
        .use-motion .logo-line-before i {
          left: initial;
        }
        .use-motion .logo-line-after i {
          right: initial;
        }
      </style>
    </noscript>
  </head>
  <body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
    <div class="container use-motion">
      <div class="headband"></div>
      <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
        <div class="header-inner">
          <div class="site-brand-container">
            <div class="site-meta">
              <div>
                <a href="/" class="brand" rel="start">
                  <span class="logo-line-before"><i></i></span>
                  <span class="site-title">Optional Blog</span>
                  <span class="logo-line-after"><i></i></span>
                </a>
              </div>
              <p class="site-subtitle">Thoughts, stories and ideas.</p>
            </div>
            <div class="site-nav-toggle">
              <button aria-label="切换导航栏">
                <span class="btn-bar"></span>
                <span class="btn-bar"></span>
                <span class="btn-bar"></span>
              </button>
            </div>
          </div>
          <nav class="site-nav">
            <ul id="menu" class="menu">
              <li class="menu-item menu-item-home">
                <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>
              </li>
              <li class="menu-item menu-item-categories">
                <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>
              </li>
              <li class="menu-item menu-item-archives">
                <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>
              </li>
              <li class="menu-item menu-item-links">
                <a href="/links/" rel="section"><i class="fa fa-fw fa-link"></i>友链</a>
              </li>
              <li class="menu-item menu-item-about">
                <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>
              </li>
              <li class="menu-item menu-item-search">
                <a href="javascript:;" class="popup-trigger">
                  <i class="fa fa-search fa-fw"></i>搜索</a>
              </li>
            </ul>
          </nav>
          <div class="site-search">
            <div class="popup search-popup">
              <div class="search-header">
                <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
                <div class="search-input-container">
                  <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input">
                </div>
                <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
              </div>
              <div id="search-result"></div>
            </div>
            <div class="search-pop-overlay"></div>
          </div>
        </div>
      </header>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        <span>0%</span>
      </div>
      <main id="main" class="main">
        <div class="main-inner">
          <div class="content-wrap">
            <div id="content" class="content">
              <div id="posts" class="posts-expand">
                <article itemscope itemtype="http://schema.org/Article">
                  <div class="post-block home">
                    <link itemprop="mainEntityOfPage" href="https://jingxuetao.com/oc-according-to-symbol-split-string/">
                    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Optional">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>
                    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Optional Blog">
    </span>
                    <header class="post-header">
                      <h1 class="post-title" itemprop="name headline">
                        <a href="/oc-according-to-symbol-split-string/" class="post-title-link" itemprop="url">OC根据分隔符分隔字符串</a>
                      </h1>
                      <div class="post-meta">
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
                        <span class="post-meta-item-text">发表于</span>
                        <time title="创建时间：2016-05-13 14:26:00" itemprop="dateCreated datePublished" datetime="2016-05-13T14:26:00+00:00">2016-05-13</time>
                        </span>
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
                        <span class="post-meta-item-text">分类于</span>
                        <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>
                        </span>
                      </div>
                    </header>
                    <div class="post-body" itemprop="articleBody">
                      <p>同学前几天面试面到了这个题,毕竟闷了半天才闷出来.记录一下省的忘了…</p>
                      <p>NSString+Category.h文件</p>

                      <!--kg-card-begin: code-->
                      <pre><code>#import &lt;Foundation/Foundation.h&gt;
@interface NSString (Category)
/**
 * 根据分隔符,分隔字符串
 *
 * @param symbol 分隔符
 *
 * @return 由被分隔完的字串组成的数组
 */
- (NSArray *)splitStringWithSymbol:(NSString *)symbol;
@end</code></pre>

                      <!--kg-card-end: code-->
                      <p>NSString+Category.m文件</p>

                      <!--kg-card-begin: code-->
                      <pre><code>#import &quot;NSString+Category.h&quot;
@implementation NSString (Category)
- (NSArray *)splitStringWithSymbol:(NSString *)symbol {
    if (!self || [self isEqualToString:@&quot;&quot;] || !symbol || [self isEqualToString:@&quot;&quot;]) {
        NSException *e = [NSException exceptionWithName:@&quot;NullPointerException&quot; reason:@&quot;self and symbol can&apos;t be nil or @\&quot;\&quot;&quot; userInfo:nil];
        @throw e;
    }
    NSMutableArray *mutableArr = [NSMutableArray new];
    NSInteger length = symbol.length;
    NSString *tempStr = nil;
    for (int startIndex = 0, endIndex = 0; endIndex &lt;= self.length - length; endIndex++) {
        tempStr = [self substringWithRange:NSMakeRange(endIndex, length)];
        if ([tempStr isEqualToString:symbol]) {
            NSString *splitedString = [self substringWithRange:NSMakeRange(startIndex, endIndex - startIndex)];
            if (splitedString &amp;&amp; ![splitedString isEqualToString:@&quot;&quot;]) {
                [mutableArr addObject:splitedString];
            }
            startIndex = endIndex + (int)length;
        } else if (endIndex == self.length - length){
            NSString *splitedString = [self substringWithRange:NSMakeRange(startIndex, endIndex - startIndex + length)];
            if (splitedString &amp;&amp; ![splitedString isEqualToString:@&quot;&quot;]) {
                [mutableArr addObject:splitedString];
            }
        }
    }
    return [mutableArr copy];
}
@end</code></pre>

                      <!--kg-card-end: code-->
                      <p>以上代码有个问题,当字符串是<code>,asdf,,123</code>,分隔字符是<code>,</code>,分隔结果是<code>(asdf,123)</code>,而不是<code>(asdf,(前面一个是数组的逗号),123)</code>.<br>试了一下官方的<code>componentsSeparatedByString</code>方法,相同的字符串跟分隔符,输出结果是<code>(&quot;&quot;,asdf,&quot;&quot;,123)</code>,连是否是<code>@&quot;&quot;</code>都没判断.Java当中实验的结果跟OC结果相同.官方方法都这样,我想我是想多了.</p>
                      <p><strong>–EOF–</strong></p>
                    </div>
                    <footer class="post-footer">
                      <div class="post-eof"></div>
                    </footer>
                  </div>
                </article>
                <article itemscope itemtype="http://schema.org/Article">
                  <div class="post-block home">
                    <link itemprop="mainEntityOfPage" href="https://jingxuetao.com/custom-searchbar/">
                    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Optional">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>
                    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Optional Blog">
    </span>
                    <header class="post-header">
                      <h1 class="post-title" itemprop="name headline">
                        <a href="/custom-searchbar/" class="post-title-link" itemprop="url">自定义搜索框</a>
                      </h1>
                      <div class="post-meta">
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
                        <span class="post-meta-item-text">发表于</span>
                        <time title="创建时间：2016-05-13 14:18:00" itemprop="dateCreated datePublished" datetime="2016-05-13T14:18:00+00:00">2016-05-13</time>
                        </span>
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
                        <span class="post-meta-item-text">分类于</span>
                        <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>
                        </span>
                      </div>
                    </header>
                    <div class="post-body" itemprop="articleBody">
                      <h3 id="封装的几种方法"><a href="#封装的几种方法" class="headerlink" title="封装的几种方法"></a>封装的几种方法</h3>
                      <ol>
                        <li>分类:UITextField/UISearchBar</li>
                        <li>自定义控件</li>
                        <li>工具类</li>
                      </ol>
                      <p>从上到下优先度依次降低.</p>
                      <h3 id="用哪种方式封装"><a href="#用哪种方式封装" class="headerlink" title="用哪种方式封装"></a>用哪种方式封装</h3>
                      <p>通过分类,如果通过分类[UITextField searchBar]方法名跟类名明显对不上号;[UISearchBar searchBar]返回结果是一个UITextField,跟类名也对不上.所以我们需要自定控件,自定义控件就需要继承UITextField.</p>
                      <h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3>
                      <p>== CTSearchBar.h 文件==</p>

                      <!--kg-card-begin: code-->
                      <pre><code>#import &lt;UIKit/UIKit.h&gt;
@interface CTSearchBar : UITextField
+ (instancetype)searchBar;
@end</code></pre>

                      <!--kg-card-end: code-->
                      <p>CTSearchBar.m</p>

                      <!--kg-card-begin: code-->
                      <pre><code>#import &quot;CTSearchBar.h&quot;
@implementation CTSearchBar
- (instancetype)initWithFrame:(CGRect)frame {
    if (self = [super initWithFrame:frame]) {
        self.font = [UIFont systemFontOfSize:15];
        self.placeholder = @&quot;请输入搜索内容&quot;;
        self.clearsOnBeginEditing = YES;
        self.clearButtonMode = UITextFieldViewModeAlways;
        UIImage *image = [UIImage imageNamed:@&quot;searchbar_textfield_search_icon&quot;];
        UIImageView *searchIcon = [[UIImageView alloc] initWithImage:image];
        searchIcon.width = 30;
        searchIcon.height = 30;
        searchIcon.contentMode = UIViewContentModeCenter;
        self.leftView = searchIcon;
        self.leftViewMode = UITextFieldViewModeAlways;
    }
    return self;
}
+ (instancetype)searchBar {
    return [[self alloc] init];
}
@end</code></pre>

                      <!--kg-card-end: code-->
                      <h3 id="调用方式"><a href="#调用方式" class="headerlink" title="调用方式"></a>调用方式</h3>

                      <!--kg-card-begin: code-->
                      <pre><code>- (void)viewDidLoad {
    [super viewDidLoad];
    UITextField *searchBar = [CTSearchBar searchBar];
    searchBar.width = 500;
    searchBar.height = 35;
    self.navigationItem.titleView = searchBar;
}</code></pre>

                      <!--kg-card-end: code-->
                      <p>上面代码中<code>searchBar.width = 500;</code>这种方式是因为我给UIView做了一个分类,所以可以直接赋值.详见:<a href="https://jingxuetao.com/by-category-to-make-uiview-convenient-layout/">通过Category让UIView更方便的布局</a></p>
                      <p>以上仅提供简单思路,还可以封装更加复杂的搜索框,像新浪微博的.</p>
                      <p><strong>–EOF–</strong></p>
                    </div>
                    <footer class="post-footer">
                      <div class="post-eof"></div>
                    </footer>
                  </div>
                </article>
                <article itemscope itemtype="http://schema.org/Article">
                  <div class="post-block home">
                    <link itemprop="mainEntityOfPage" href="https://jingxuetao.com/use-category-define-uibarbuttonitem/">
                    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Optional">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>
                    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Optional Blog">
    </span>
                    <header class="post-header">
                      <h1 class="post-title" itemprop="name headline">
                        <a href="/use-category-define-uibarbuttonitem/" class="post-title-link" itemprop="url">用分类自定义UIBarButtonItem</a>
                      </h1>
                      <div class="post-meta">
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
                        <span class="post-meta-item-text">发表于</span>
                        <time title="创建时间：2016-05-11 14:15:00" itemprop="dateCreated datePublished" datetime="2016-05-11T14:15:00+00:00">2016-05-11</time>
                        </span>
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
                        <span class="post-meta-item-text">分类于</span>
                        <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>
                        </span>
                      </div>
                    </header>
                    <div class="post-body" itemprop="articleBody">
                      <blockquote>
                        <p>原因：</p>
                      </blockquote>
                      <ol>
                        <li>项目中多次用到自定义UIBarButtonItem，所以需要抽取出来</li>
                        <li>代码该干什么就干什么，因为这段代码是自定义。UIBarButtonItem，所以应该由UIBarButtonItem做。所以创建一个分类。</li>
                        <li>命名习惯，代码规范。要用[UIBarButtonItem itemWith…]这种形式。</li>
                      </ol>
                      <h3 id="自定义UIBarButtonItem"><a href="#自定义UIBarButtonItem" class="headerlink" title="自定义UIBarButtonItem"></a>自定义UIBarButtonItem</h3>
                      <p>UIBarButtonItem+Category.h文件</p>

                      <!--kg-card-begin: code-->
                      <pre><code>#import &lt;UIKit/UIKit.h&gt;
@interface UIBarButtonItem (Category)
+ (NSArray *)itemWithTarget:(id)target action:(SEL)action image:(NSString *)image lighlightImage:(NSString *)lighlightImage;
@end</code></pre>

                      <!--kg-card-end: code-->
                      <p>UIBarButtonItem+Category.m文件</p>

                      <!--kg-card-begin: code-->
                      <pre><code>#import &quot;UIBarButtonItem+Category.h&quot;
@implementation UIBarButtonItem (Category)
/**
 * 自定义一个UIBarButtomItem
 *
 * @param target 点击之后调用哪个对象
 * @param action 点击之后调用对象里面的哪个方法
 * @param image 普通状态下图片
 * @param lighlightImage 高亮状态下图片
 *
 * @return 创建完的一个UIBarButtomItem数组
 */
+ (NSArray *)itemWithTarget:(id)target action:(SEL)action image:(NSString *)image lighlightImage:(NSString *)lighlightImage {
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setImage:[UIImage imageNamed:image] forState:UIControlStateNormal];
    [button setImage:[UIImage imageNamed:lighlightImage] forState:UIControlStateHighlighted];
    [button addTarget:target action:action forControlEvents:UIControlEventTouchUpInside];
    button.size = button.currentImage.size;
    UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc]initWithCustomView:button];
    UIBarButtonItem *speaceItem = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil];
    speaceItem.width = -5;
    return @[speaceItem,buttonItem];
}
@end</code></pre>

                      <!--kg-card-end: code-->
                      <h3 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h3>
                      <p>在ViewController调用或者在自定义的UINavigationController的push方法里面调用。</p>

                      <!--kg-card-begin: code-->
                      <pre><code>//ViewController调用
self.navigationItem.leftBarButtonItems = [UIBarButtonItem itemWithTarget:self action:@selector(back) image:@&quot;back_icon_red&quot; lighlightImage:@&quot;back_icon_red&quot;];
//自定义UINavigationController的push方法调用
viewController.navigationItem.leftBarButtonItems = [UIBarButtonItem itemWithTarget:self action:@selector(back) image:@&quot;back_icon_red&quot; lighlightImage:@&quot;back_icon_red&quot;];</code></pre>

                      <!--kg-card-end: code-->
                      <p>注意：action方法写在ViewController或自定义UINavigationController里面。</p>
                      <p>当然还可以在分类里做其他自定义的样式。</p>
                      <p><strong>–EOF–</strong></p>
                    </div>
                    <footer class="post-footer">
                      <div class="post-eof"></div>
                    </footer>
                  </div>
                </article>
                <article itemscope itemtype="http://schema.org/Article">
                  <div class="post-block home">
                    <link itemprop="mainEntityOfPage" href="https://jingxuetao.com/unified-set-navi-upper-left-corner-icon/">
                    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Optional">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>
                    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Optional Blog">
    </span>
                    <header class="post-header">
                      <h1 class="post-title" itemprop="name headline">
                        <a href="/unified-set-navi-upper-left-corner-icon/" class="post-title-link" itemprop="url">统一设置UINavigationController左上角图标</a>
                      </h1>
                      <div class="post-meta">
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
                        <span class="post-meta-item-text">发表于</span>
                        <time title="创建时间：2016-05-11 14:00:00" itemprop="dateCreated datePublished" datetime="2016-05-11T14:00:00+00:00">2016-05-11</time>
                        </span>
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
                        <span class="post-meta-item-text">分类于</span>
                        <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>
                        </span>
                      </div>
                    </header>
                    <div class="post-body" itemprop="articleBody">
                      <h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3>
                      <p>通过工厂方法，然后在需要左上角显示图标的ViewController的viewDidLoad方法调用。代码如下：</p>
                      <p>Factory.h文件</p>

                      <!--kg-card-begin: code-->
                      <pre><code>#import &lt;Foundation/Foundation.h&gt;
@interface Factory : NSObject
+ (void)addBackButton:(UIViewController *)viewController;
@end
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code"><pre><span class="line">==Factory.m文件==</span><br></pre>
                      </td>
                      </tr>
                      </table>
                      </figure>
                      #import &quot;Factory.h&quot;
                      @implementation Factory
                      + (void)addBackButton:(UIViewController *)viewController{
                      UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
                      [button setImage:[UIImage imageNamed:@&quot;community_highlight&quot;] forState:UIControlStateNormal];
                      [button setImage:[UIImage imageNamed:@&quot;community_highlight&quot;] forState:UIControlStateHighlighted];
                      CGRect frame = button.frame;
                      frame.size = button.currentImage.size;
                      button.frame = frame;
                      UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc]initWithCustomView:button];
                      UIBarButtonItem *speaceItem = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil];
                      speaceItem.width = -5;
                      viewController.navigationItem.leftBarButtonItems = @[speaceItem,buttonItem];
                      }
                      @end
                      <figure class="highlight plain">
                        <table>
                          <tr>
                            <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                            </td>
                            <td class="code"><pre><span class="line">### 方法二</span><br><span class="line">这种方法是通过实现UINavigationController的pushViewController方法，拦截所有push进来的viewController，然后对其进行设置。代码如下：</span><br><span class="line"></span><br><span class="line">==BaseNavigationController.h文件==</span><br></pre>
                            </td>
                          </tr>
                        </table>
                      </figure>
                      #import &lt;UIKit/UIKit.h&gt;
                      @interface BaseNavigationController : UINavigationController
                      @end
                      <figure class="highlight plain">
                        <table>
                          <tr>
                            <td class="gutter"><pre><span class="line">1</span><br></pre>
                            </td>
                            <td class="code"><pre><span class="line">==BaseNavigationController.m文件==</span><br></pre>
                            </td>
                          </tr>
                        </table>
                      </figure>
                      #import &quot;BaseNavigationController.h&quot;
                      @interface BaseNavigationController ()
                      @end
                      @implementation BaseNavigationController
                      - (void)addBackButton:(UIViewController *)viewController{
                      if (self.viewControllers.count &gt; 0) {
                      viewController.hidesBottomBarWhenPushed = YES;
                      UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
                      [button setImage:[UIImage imageNamed:@&quot;back_icon_red&quot;] forState:UIControlStateNormal];
                      [button setImage:[UIImage imageNamed:@&quot;back_icon_red&quot;] forState:UIControlStateHighlighted];
                      [button addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];
                      button.size = button.currentImage.size;
                      UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc]initWithCustomView:button];
                      UIBarButtonItem *speaceItem = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil];
                      speaceItem.width = -5;
                      viewController.navigationItem.leftBarButtonItems = @[speaceItem,buttonItem];
                      }
                      }
                      - (void)back{
                      [self popViewControllerAnimated:YES];
                      }
                      - (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated{
                      NSLog(@&quot;push&quot;);
                      [self addBackButton:viewController];
                      [super pushViewController:viewController animated:animated];
                      }
                      #pragma -mark 生命周期
                      - (void)viewDidLoad {
                      [super viewDidLoad];
                      }
                      - (void)didReceiveMemoryWarning {
                      [super didReceiveMemoryWarning];
                      }
                      @end
                      ```
                      &gt; 注意：
                      1. 用方法一如果某个viewController需要单独设置navigationItem的图标，则在ViewController的viewDidLoad方法里设置即可。
                      2. 用了方法二如果在push之前调用设置view样式有关的方法，则先调用viewDidLoad方法，然后调用push方法。这时如果在viewDidLoad方法里设置navigationItem的图标将跟push方法拦截viewController设置的效果一样。
                      &gt; 所谓的拦截，大部分都是通过自定义类，然后重写自带方法实现的。
                      **--EOF--**</code>
                      </pre>

                      <!--kg-card-end: code-->
                    </div>
                    <footer class="post-footer">
                      <div class="post-eof"></div>
                    </footer>
                  </div>
                </article>
                <article itemscope itemtype="http://schema.org/Article">
                  <div class="post-block home">
                    <link itemprop="mainEntityOfPage" href="https://jingxuetao.com/tong-guo-categoryrang-uiviewgeng-fang-bian-de-bu-ju/">
                    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Optional">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>
                    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Optional Blog">
    </span>
                    <header class="post-header">
                      <h1 class="post-title" itemprop="name headline">
                        <a href="/tong-guo-categoryrang-uiviewgeng-fang-bian-de-bu-ju/" class="post-title-link" itemprop="url">通过Category让UIView更方便的布局</a>
                      </h1>
                      <div class="post-meta">
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
                        <span class="post-meta-item-text">发表于</span>
                        <time title="创建时间：2016-05-11 13:57:00" itemprop="dateCreated datePublished" datetime="2016-05-11T13:57:00+00:00">2016-05-11</time>
                        </span>
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
                        <span class="post-meta-item-text">分类于</span>
                        <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>
                        </span>
                      </div>
                    </header>
                    <div class="post-body" itemprop="articleBody">
                      <p>之前我们给一个控件设置宽高或者位置的时候会用下面代码：</p>

                      <!--kg-card-begin: code-->
                      <pre><code>UIView *view = [UIView new];
CGRect frame = view.frame;
frame.size.width = 100;
view.frame = frame;</code></pre>

                      <!--kg-card-end: code-->
                      <p>上面方式很麻烦，不解释。下面是对UIView的分类，方便了对控件的布局：<br>UIView+Category.h文件</p>

                      <!--kg-card-begin: code-->
                      <pre><code>#import &lt;UIKit/UIKit.h&gt;
@interface UIView (Extension)
@property (nonatomic,assign) CGFloat x;
@property (nonatomic,assign) CGFloat y;
@property (nonatomic,assign) CGFloat width;
@property (nonatomic,assign) CGFloat height;
@property (nonatomic,assign) CGSize size;
@property (nonatomic,assign) CGPoint origin;
//- (void)setX:(CGFloat)x;
//- (CGFloat)x;
//- (void)setY:(CGFloat)y;
//- (CGFloat)y;
//- (void)setWidth:(CGFloat)width;
//- (CGFloat)width;
//- (void)setHeight:(CGFloat)height;
//- (CGFloat)height;
//- (void)setOrigin:(CGPoint)origin;
//- (CGPoint)origin;
//- (void)setSize:(CGSize)size;
//- (CGSize)size;
@end</code></pre>

                      <!--kg-card-end: code-->
                      <p>UIView+Category.m文件</p>

                      <!--kg-card-begin: code-->
                      <pre><code>#import &quot;UIView+Category.h&quot;
@implementation UIView (Extension)
- (void)setX:(CGFloat)x {
    CGRect frame = self.frame;
    frame.origin.x = x;
    self.frame = frame;
}
- (CGFloat)x {
    return self.frame.origin.x;
}
- (void)setY:(CGFloat)y {
    CGRect frame = self.frame;
    frame.origin.y = y;
    self.frame = frame;
    self.frame = frame;
}
- (CGFloat)y {
    return self.frame.origin.y;
}
- (void)setWidth:(CGFloat)width {
    CGRect frame = self.frame;
    frame.size.width = width;
    self.frame = frame;
}
- (CGFloat)width {
    return self.frame.size.width;
}
- (void)setHeight:(CGFloat)height {
    CGRect frame = self.frame;
    frame.size.height = height;
    self.frame = frame;
}
- (CGFloat)height {
    return self.frame.size.height;
}
- (void)setOrigin:(CGPoint)origin {
    CGRect frame = self.frame;
    frame.origin = origin;
    self.frame = frame;
}
- (CGPoint)origin {
    return self.frame.origin;
}
- (void)setSize:(CGSize)size {
    CGRect frame = self.frame;
    frame.size = size;
    self.frame = frame;
}
- (CGSize)size {
    return self.frame.size;
}
@end</code></pre>

                      <!--kg-card-end: code-->
                      <p>现在就可以通过下面方式对UIView进行布局了：</p>

                      <!--kg-card-begin: code-->
                      <pre><code>UIView *view = [UIView new];
view.width = 100;
view.height = 100;
view.x = 100;
view.y = 100;
//或者
view.origin = CGPointMake(100, 100);
view.size = CGSizeMake(100, 100);</code></pre>

                      <!--kg-card-end: code-->
                      <p>最后你可能有疑问，category中不是不能定义属性么？即使可以定义属性，不应该用runtime来实现setter跟getter方法么？</p>
                      <ol>
                        <li>category中的属性不能自动生成实例变量（类似:_xxx），所以我们有时会看到通过runtime的方式将变量绑定到实例上。</li>
                        <li>上面例子，定义属性为了生成setter跟getter方法。没有用到任何有关<code>self.x</code>、<code>self.y</code>、<code>self.width</code>或者<code>_x</code>、<code>_y</code>这些自定义属性，都是通过UIView自带属性frame(self.frame)来实现给UIView设置布局，所以不需要用runtime。所以本例子不定义属性也可以，把属性注释掉，然后将下面方法取消注释，一样能用。</li>
                      </ol>
                      <p><strong>–EOF–</strong></p>
                    </div>
                    <footer class="post-footer">
                      <div class="post-eof"></div>
                    </footer>
                  </div>
                </article>
                <article itemscope itemtype="http://schema.org/Article">
                  <div class="post-block home">
                    <link itemprop="mainEntityOfPage" href="https://jingxuetao.com/add-dictionary-to-the-ghost/">
                    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Optional">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>
                    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Optional Blog">
    </span>
                    <header class="post-header">
                      <h1 class="post-title" itemprop="name headline">
                        <a href="/add-dictionary-to-the-ghost/" class="post-title-link" itemprop="url">为Ghost博客文章添加目录</a>
                      </h1>
                      <div class="post-meta">
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
                        <span class="post-meta-item-text">发表于</span>
                        <time title="创建时间：2016-04-29 14:07:00" itemprop="dateCreated datePublished" datetime="2016-04-29T14:07:00+00:00">2016-04-29</time>
                        </span>
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
                        <span class="post-meta-item-text">分类于</span>
                        <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Ghost/" itemprop="url" rel="index"><span itemprop="name">Ghost</span></a></span>
                        </span>
                      </div>
                    </header>
                    <div class="post-body" itemprop="articleBody">
                      <h3 id="引入JS文件"><a href="#引入JS文件" class="headerlink" title="引入JS文件"></a>引入JS文件</h3>
                      <p>在default.hbs中引入js文件,下载<a href="https://github.com/idiotWu/jQuery-TOC/tree/master/dist" target="_blank" rel="noopener">TOC</a></p>

                      <!--kg-card-begin: code-->
                      <pre><code>//放在jQuery之后
&lt;script src=&quot;https://xxxxxx.com/jquery.toc.min.js&quot;&gt;&lt;/script&gt;</code></pre>

                      <!--kg-card-end: code-->
                      <h3 id="添加DIV"><a href="#添加DIV" class="headerlink" title="添加DIV"></a>添加DIV</h3>
                      <p>在post.hbs文件的<code>&lt;/main&gt;</code>标签之前添加下面代码</p>

                      <!--kg-card-begin: code-->
                      <pre><code>&lt;aside id=&quot;toc&quot;&gt;
    &lt;h4&gt;文章目录&lt;/h4&gt;
&lt;/aside&gt;</code></pre>

                      <!--kg-card-end: code-->
                      <h3 id="设置样式"><a href="#设置样式" class="headerlink" title="设置样式"></a>设置样式</h3>
                      <p>在博客的css文件里设置样式,代码如下:</p>

                      <!--kg-card-begin: code-->
                      <pre><code>#toc {
    font: 400 16px/1.8 &quot;Open Sans&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei&quot;,&quot;WenQuanYi Micro Hei&quot;,sans-serif;
    position: fixed;
    display: none;
    left:50%;
    top: 50%;
    width: 180px;
    max-height: 100%;
    padding: 0 5px;
    overflow-y: auto;
}
#toc ol {
    margin: 0 0 0 1em;
    list-style: none;
    padding: 0;
}
#toc li {
    padding: 0;
    position: relative;
}
#toc li:before {
    border: 5px dashed transparent;
    border-left: 5px solid #57a3e8;
    position: absolute;
    left: -1em;
    top: .5em;
}
#toc li:before {
    content: &quot;&quot;;
    height: 0;
    width: 0;
    overflow: hidden;
}
#toc a {
    display: block;
    color: #6aa7c0;
    cursor: pointer;
    max-height: 2em;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    text-decoration: none;
    transition: color .3s;
}
#toc a:hover {
    color: #F3A01E;
}
#toc h4 {
    padding-bottom: 0.25em;
    margin: .75em 0;
    border-bottom: 1px solid #b3b3b3;
    font-size: 18px;
    color: #3b3b3b;
    font-family: &quot;Open Sans&quot;,&quot;Hiragino Sans GB&quot;,&quot;Microsoft YaHei&quot;,&quot;WenQuanYi Micro Hei&quot;,sans-serif;
}</code></pre>

                      <!--kg-card-end: code-->
                      <h3 id="初始化目录插件并动态的调整样式"><a href="#初始化目录插件并动态的调整样式" class="headerlink" title="初始化目录插件并动态的调整样式"></a>初始化目录插件并动态的调整样式</h3>
                      <p>在博客下的JS文件中添加下面代码:</p>

                      <!--kg-card-begin: code-->
                      <pre><code>$(document).ready(function() {
    //初始化插件
    $(&apos;#toc&apos;).initTOC({
        selector: &quot;h5, h6&quot;,
        scope: &quot;article&quot;,
        overwrite: false,
        prefix: &quot;toc&quot;
    });
    //动态设置样式,例如:滚动到一定程度之后隐藏目录
    var mar_left = $(&quot;.post&quot;).width() / 2 + 20;
    //var top = $(&quot;#toc&quot;).css(&quot;top&quot;); 这只能获取类似152px的字符串,下面才能获取值
    //var top = $(&quot;#toc&quot;).position().top;
    var top = $(window).height();
    $(&quot;#toc&quot;).css(&quot;top&quot;,top / 2 - (top / 4)+&quot;px&quot;);
    $(&quot;#toc ol&quot;).html(function(i,origText){
        return origText + &quot;&lt;li&gt;&lt;a id=&apos;scrollTop&apos; href=&apos;#&apos;&gt;返回顶部&lt;/a&gt;&lt;/li&gt;&quot;;
    });
    $(&quot;#toc&quot;).css({&quot;margin-left&quot;:mar_left+&quot;px&quot;});
    $(window).scroll(function(){
        var window_offset = $(window).scrollTop();
        var main_header_height = $(&quot;.main-header&quot;).height();
        var content_height = $(&quot;.content&quot;).height();
        if(window_offset &lt; main_header_height - 100) {
            $(&quot;#toc&quot;).hide();
            //下面的条件不能用 a&gt;x&gt;c这种形式,只能用&amp;&amp;.身为一个前端小白表示伤不起...
        }else if(window_offset &gt; main_header_height&amp;&amp;main_header_height+content_height - 500 &gt; window_offset) {
            $(&quot;#toc&quot;).show();
        }else{
            $(&quot;#toc&quot;).hide();
        }
    });
});</code></pre>

                      <!--kg-card-end: code-->
                      <p>以上就是我博客的文章目录添加步骤.前端有个好处就是<code>所见即所得</code>,慢慢折腾.^_^</p>
                      <p><strong>–EOF–</strong></p>
                    </div>
                    <footer class="post-footer">
                      <div class="post-eof"></div>
                    </footer>
                  </div>
                </article>
                <article itemscope itemtype="http://schema.org/Article">
                  <div class="post-block home">
                    <link itemprop="mainEntityOfPage" href="https://jingxuetao.com/forced-conversion-between-sub-classes/">
                    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Optional">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>
                    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Optional Blog">
    </span>
                    <header class="post-header">
                      <h1 class="post-title" itemprop="name headline">
                        <a href="/forced-conversion-between-sub-classes/" class="post-title-link" itemprop="url">子类对象之间的强转</a>
                      </h1>
                      <div class="post-meta">
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
                        <span class="post-meta-item-text">发表于</span>
                        <time title="创建时间：2016-04-27 14:20:00" itemprop="dateCreated datePublished" datetime="2016-04-27T14:20:00+00:00">2016-04-27</time>
                        </span>
                      </div>
                    </header>
                    <div class="post-body" itemprop="articleBody">
                      <pre><code>#import &lt;Foundation/Foundation.h&gt;
@interface Tom : NSObject
@property (nonatomic,copy) NSString *name;
@property (nonatomic) NSInteger age;
@end
@implementation Tom
- (instancetype)initWithName:(NSString *)name andAge:(NSInteger)age {
    if (self = [self init]) {
        self.name = name;
        self.age =age;
    }
    return self;
}
@end
@interface Jerry : NSObject
@property (nonatomic) NSString *name;
@property (nonatomic) NSInteger age;
@end
@implementation Jerry
- (instancetype)initWithName:(NSString *)name andAge:(NSInteger)age {
    if (self = [self init]) {
        self.name = name;
        self.age =age;
    }
    return self;
}
@end
@interface Test : NSObject
@end
@implementation Test
+ (void)showName:(Tom *)tom {
    NSLog(@&quot;%@&quot;,tom.name);
}
+ (void)showNameWithKVC:(NSObject *)obj{
    NSString *name = [obj valueForKey:@&quot;name&quot;];
    NSLog(@&quot;%@&quot;,name);
}
@end
int main(int argc, const char * argv[]) {
    @autoreleasepool {
        Tom *tom = [[Tom alloc]initWithName:@&quot;Tom&quot; andAge:10];
        Jerry *jerry = [[Jerry alloc]initWithName:@&quot;Jerry&quot; andAge:10];
        //可以通过强转的方式
        [Test showName:(Tom *)jerry];
        [Test showName:tom];
        //也可以通过KVC
        [Test showNameWithKVC:jerry];
        [Test showNameWithKVC:tom];
    }
    return 0;
}</code></pre>

                      <!--kg-card-end: code-->
                      <p><strong>–EOF–</strong></p>
                    </div>
                    <footer class="post-footer">
                      <div class="post-eof"></div>
                    </footer>
                  </div>
                </article>
                <article itemscope itemtype="http://schema.org/Article">
                  <div class="post-block home">
                    <link itemprop="mainEntityOfPage" href="https://jingxuetao.com/config-centos-secretkey-authentication-login/">
                    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Optional">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>
                    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Optional Blog">
    </span>
                    <header class="post-header">
                      <h1 class="post-title" itemprop="name headline">
                        <a href="/config-centos-secretkey-authentication-login/" class="post-title-link" itemprop="url">配置CentOS密钥验证登录</a>
                      </h1>
                      <div class="post-meta">
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
                        <span class="post-meta-item-text">发表于</span>
                        <time title="创建时间：2016-04-19 13:51:00" itemprop="dateCreated datePublished" datetime="2016-04-19T13:51:00+00:00">2016-04-19</time>
                        </span>
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
                        <span class="post-meta-item-text">分类于</span>
                        <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CentOS/" itemprop="url" rel="index"><span itemprop="name">CentOS</span></a></span>
                        </span>
                      </div>
                    </header>
                    <div class="post-body" itemprop="articleBody">
                      <p>用密码登录SSH好不方便,并且安全性不高,为了提升安全性那我们就用密钥登录.</p>
                      <blockquote>
                        <p>本地环境:OS X,估计是Linux就可以.</p>
                      </blockquote>
                      <h3 id="1-在远程服务器上创建密钥对"><a href="#1-在远程服务器上创建密钥对" class="headerlink" title="1.在远程服务器上创建密钥对."></a>1.在远程服务器上创建密钥对.</h3>

                      <!--kg-card-begin: code-->
                      <pre><code># create key pair
[cent@dlp ~]$ ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/home/cent/.ssh/id_rsa): # 路径默认,直接回车
Created directory &apos;/home/cent/.ssh&apos;.
Enter passphrase (empty for no passphrase): # 设置密钥密码,直接回车，不用设置
Enter same passphrase again:#再次输入密码,直接回车
Your identification has been saved in /home/cent/.ssh/id_rsa.
Your public key has been saved in /home/cent/.ssh/id_rsa.pub.
The key fingerprint is:
38:f1:a4:6d:d3:0e:99:c8:fa:1d:1d:48:86:f0:fe:74 cent@dlp.server.world
The key&apos;s randomart image is:
[cent@dlp ~]$ mv ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys#将id_rsa.pub中的公钥复制到authorized_keys中
[cent@dlp ~]$ chmod 600 ~/.ssh/authorized_keys #修改authorized_keys权限为拥有者可读写</code></pre>

                      <!--kg-card-end: code-->
                      <h3 id="2-将远程服务器上的私钥下载到本地用于登录远程服务器"><a href="#2-将远程服务器上的私钥下载到本地用于登录远程服务器" class="headerlink" title="2.将远程服务器上的私钥下载到本地用于登录远程服务器"></a>2.将远程服务器上的私钥下载到本地用于登录远程服务器</h3>
                      <p>以下是本地操作</p>

                      <!--kg-card-begin: code-->
                      <pre><code> [cent@www ~]$ mkdir ~/.ssh #创建文件夹
[cent@www ~]$ chmod 700 ~/.ssh #修改文件夹权限为拥有者可&apos;读,写,执行&apos;
# copy the secret key to local ssh directory
[cent@www ~]$ scp cent@10.0.0.30:/home/cent/.ssh/id_rsa ~/.ssh/ #将远程的私钥下载到本地,这要注意路径,如果用root登录的,路径是:/root/.ssh/id_rsa
cent@10.0.0.30&apos;s password: #输入远程服务器密码
id_rsa
[cent@www ~]$ ssh -i ~/.ssh/id_rsa cent@10.0.0.30 #现在就可以用这条命令登录远程服务器了
Enter passphrase for key &apos;/home/cent/.ssh/id_rsa&apos;: # 刚才密钥没设置密码,所以不会出现
Last login: Wed Jul 30 21:37:19 2014 from www.server.world
[cent@dlp ~]$ # 登录成功</code></pre>

                      <!--kg-card-end: code-->
                      <h3 id="3-简化登录"><a href="#3-简化登录" class="headerlink" title="3.简化登录"></a>3.简化登录</h3>
                      <p>本地机器执行下面代码:</p>

                      <!--kg-card-begin: code-->
                      <pre><code>vi ~/.ssh/config</code></pre>

                      <!--kg-card-end: code-->
                      <p>加入下面一段内容:</p>

                      <!--kg-card-begin: code-->
                      <pre><code>Host server #别名，域名缩写
    HostName jingxuetao.com #完整的域名
    User root #登录该域名使用的账号名
    PreferredAuthentications publickey #加不加都一样,SSH会优先密钥登录
    IdentityFile ~/.ssh/id_rsa #私钥文件的路径
    #删掉#号后面的中文,包括这句</code></pre>

                      <!--kg-card-end: code-->
                      <p>上面配置完了之后就可以通过<code>ssh server</code>或者<code>ssh jingxuetao.com</code>来登录远程服务器了.</p>
                      <h3 id="4-关闭密码验证登录"><a href="#4-关闭密码验证登录" class="headerlink" title="4.关闭密码验证登录"></a>4.关闭密码验证登录</h3>
                      <p>操作远程服务器</p>

                      <!--kg-card-begin: code-->
                      <pre><code>vi /etc/ssh/sshd_config</code></pre>

                      <!--kg-card-end: code-->
                      <p>找到<code>PasswordAuthentication</code>将其值改为<code>no</code></p>

                      <!--kg-card-begin: code-->
                      <pre><code>PasswordAuthentication no</code></pre>

                      <!--kg-card-end: code-->
                      <p>最后用<code>systemctl restart sshd</code>或者<code>service sshd restart</code>重启SSH服务</p>
                      <blockquote>
                        <p>好了,sshd_config文件中除了配置PasswordAuthentication这条之外其他的并不用配置,还是被注释状态</p>
                      </blockquote>
                      <p>保存到本地的密钥,最好备份到网盘一份.</p>
                      <p>本文参考:<a href="http://www.server-world.info/en/note?os=CentOS_7&p=ssh&f=4" target="_blank" rel="noopener">server-world</a></p>
                      <p><strong>–EOF–</strong></p>
                    </div>
                    <footer class="post-footer">
                      <div class="post-eof"></div>
                    </footer>
                  </div>
                </article>
                <article itemscope itemtype="http://schema.org/Article">
                  <div class="post-block home">
                    <link itemprop="mainEntityOfPage" href="https://jingxuetao.com/night-hypocritical/">
                    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Optional">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>
                    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Optional Blog">
    </span>
                    <header class="post-header">
                      <h1 class="post-title" itemprop="name headline">
                        <a href="/night-hypocritical/" class="post-title-link" itemprop="url">深夜矫情</a>
                      </h1>
                      <div class="post-meta">
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
                        <span class="post-meta-item-text">发表于</span>
                        <time title="创建时间：2016-04-16 13:55:00" itemprop="dateCreated datePublished" datetime="2016-04-16T13:55:00+00:00">2016-04-16</time>
                        </span>
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
                        <span class="post-meta-item-text">分类于</span>
                        <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Me/" itemprop="url" rel="index"><span itemprop="name">Me</span></a></span>
                        </span>
                      </div>
                    </header>
                    <div class="post-body" itemprop="articleBody">
                      <p>前一天过得不踏实,心里不安,胡思乱想中想起博客名,就想起了高中,然后又想起了初中.然后百度了一下初中跟高中的官网,于是就找了一些图片,回忆一下我的初中跟高中.多图预警</p>
                      <h3 id="平度市朝-zhao-阳中学"><a href="#平度市朝-zhao-阳中学" class="headerlink" title="平度市朝(zhao)阳中学"></a>平度市朝(zhao)阳中学</h3>
                      <p>教学楼正面,教学楼从上面看是呈一个蝴蝶状的.初三的时候做课间操就是在教学楼前的广场上做.我们班在做操的时候是在广场中央,因为喇叭是安装在两边的教学楼上的并且对称,所以在做操的时候会有不一样的听觉效果.第一张图片是当时我们的朝阳中学的原图,下面三张图是后来的华侨高中.因为乡镇高中要迁往市里,所以就把我们学校给征收了,变成了华侨高中.好好的母校,被别人征去当高中,真是亏.</p>

                      <!--kg-card-begin: markdown-->
                      <p><img alt data-src="https://pic.jingxuetao.com/image/b/12/6691cc3c2226c662f69c11cf2a773.jpg"><br> <img alt data-src="https://pic.jingxuetao.com/image/6/ce/498ac686a12e1871981a304080f30.jpg"><br> <img alt data-src="https://pic.jingxuetao.com/image/7/33/58af8addd353e152a809ca194b343.jpg"><br> <img alt data-src="https://pic.jingxuetao.com/image/2/b2/a7e7e07c2dea8468175bd55c479b6.jpg"></p>

                      <!--kg-card-end: markdown-->
                      <p>教学楼背面.由于花钱不太节制,家里给的生活费第一个周花的差不多了,到了第二个周就只剩二三十块钱左右,二三十块钱要过五天,平均每天也就五六块钱.所以每当中午放学的时候,听着喇叭里放的<code>斯卡波罗集市</code>,走在这条回宿舍的路上(没钱,只能回宿舍,就着调料啃馒头:(),心里有点淡淡的忧伤.歌曲如下:</p>
                      <p>&lt;斯卡波罗集市-莎拉布莱曼&gt;</p>

                      <!--kg-card-begin: markdown-->
                      <p><img alt data-src="https://pic.jingxuetao.com/image/a/08/d944a589b50f71c52c66ed2304855.jpg"></p>

                      <!--kg-card-end: markdown-->
                      <p>操场,应该是初二的时候修起来的.之前都叫草场,杂草丛生,草有人那么高.</p>

                      <!--kg-card-begin: markdown-->
                      <p><img alt data-src="https://pic.jingxuetao.com/image/0/4c/5d22031ce6dddad5c2f616af6edc3.jpg"></p>

                      <!--kg-card-end: markdown-->
                      <p>左边是一个小操场,初二的时候做广播体操,早晨跑操都在这.右边是女生宿舍,当时好像没窗帘..</p>

                      <!--kg-card-begin: markdown-->
                      <p><img alt data-src="https://pic.jingxuetao.com/image/3/79/d4e97f33cb987aab4989e6ed8caf8.jpg"></p>

                      <!--kg-card-end: markdown-->
                      <p>餐厅拐角处的一棵树.树的右边是一个大花坛(图中没有),想当年’老邱’(学生处主任,武警出身)在这整过两个带刀外校学生.</p>

                      <!--kg-card-begin: markdown-->
                      <p><img alt data-src="https://pic.jingxuetao.com/image/2/65/9efc435ba32a20daf5be39e4e7230.jpg"></p>

                      <!--kg-card-end: markdown-->
                      <p>教学楼,宿舍楼东边的一条路,灯是后来装的</p>

                      <!--kg-card-begin: markdown-->
                      <p><img alt data-src="https://pic.jingxuetao.com/image/4/54/da0017701197c7e5b1e0b9a8c0a39.jpg"></p>

                      <!--kg-card-end: markdown-->
                      <p>对了,我们那一级是16个班,然而其他初中就算全校也没有16个班啊有木有,所以我们会说’拉我们一个级部出去可以打其他学校的整个学校’.不过后来招的学生就慢慢变少了,我们下一级好像是14个班.这几年好像8个班…</p>
                      <h3 id="平度市开发区高中"><a href="#平度市开发区高中" class="headerlink" title="平度市开发区高中"></a>平度市开发区高中</h3>
                      <p>高中跟初中比起来就比较老旧了,因为初中是06年刚搬到新校区.而高中一直是这个校区.然而一中,九中都换了新校区,并且其他几所高中由于跟一中九中合并,同样也是新校区,就我们学校.万恶的资本主义,唉.</p>
                      <p>仁卿楼,主教学楼,楼前一本大书,内容是<code>劝学</code>(劝学是个什么鬼,劝你退学,恩!),左边是中文版,右边是英文版</p>

                      <!--kg-card-begin: markdown-->
                      <p><img alt data-src="https://pic.jingxuetao.com/image/9/28/bdbad9b58ca6f2582e8293dbff073.jpg"><br> <img alt data-src="https://pic.jingxuetao.com/image/b/1c/dba6ba975e532af568308e9920a46.jpg"></p>

                      <!--kg-card-end: markdown-->
                      <p>仁卿楼广场西边,餐厅南边的小花坛,再往西是高二西教学楼</p>

                      <!--kg-card-begin: markdown-->
                      <p><img alt data-src="https://pic.jingxuetao.com/image/e/59/702c36e0445227fd6fa57dbe2f358.jpg"></p>

                      <!--kg-card-end: markdown-->
                      <p>高二西教学楼前的草坪,想起了被班主任没收的手机…</p>

                      <!--kg-card-begin: markdown-->
                      <p><img alt data-src="https://pic.jingxuetao.com/image/7/0b/c62bb75aac26bffd5c4624f4f8860.jpg"></p>

                      <!--kg-card-end: markdown-->
                      <p>高二西教学楼前的走廊</p>

                      <!--kg-card-begin: markdown-->
                      <p><img alt data-src="https://pic.jingxuetao.com/image/a/f5/fcc685c478b3bb72a9f2d79266fd6.jpg"></p>

                      <!--kg-card-end: markdown-->
                      <p>仁卿楼广场西面的办公楼,高三临近毕业的时候正式入团(共青团)就是在这弄得^_^,少交了好几年团费,不亏.</p>

                      <!--kg-card-begin: markdown-->
                      <p><img alt data-src="https://pic.jingxuetao.com/image/0/0b/01322c280b0c6dc8b089072d19bbc.jpg"></p>

                      <!--kg-card-end: markdown-->
                      <p>高中官网上的图片差不多就这些了,大一的时候高中又重修了一座教学楼跟操场,说好的重建校区呢??看来重建校区是没希望了..</p>
                      <p>有时间一定回去看看，但是什么时候有时间呢？这是个问题.</p>
                      <p>好了,矫情完毕,睡觉.</p>
                      <p><strong>–EOF–</strong></p>
                    </div>
                    <footer class="post-footer">
                      <div class="post-eof"></div>
                    </footer>
                  </div>
                </article>
                <article itemscope itemtype="http://schema.org/Article">
                  <div class="post-block home">
                    <link itemprop="mainEntityOfPage" href="https://jingxuetao.com/configure-the-use-of-hsts/">
                    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Optional">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>
                    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Optional Blog">
    </span>
                    <header class="post-header">
                      <h1 class="post-title" itemprop="name headline">
                        <a href="/configure-the-use-of-hsts/" class="post-title-link" itemprop="url">如何配置使用HSTS</a>
                      </h1>
                      <div class="post-meta">
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
                        <span class="post-meta-item-text">发表于</span>
                        <time title="创建时间：2016-03-24 13:54:00" itemprop="dateCreated datePublished" datetime="2016-03-24T13:54:00+00:00">2016-03-24</time>
                        </span>
                        <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
                        <span class="post-meta-item-text">分类于</span>
                        <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/NGINX/" itemprop="url" rel="index"><span itemprop="name">NGINX</span></a></span>
                        </span>
                      </div>
                    </header>
                    <div class="post-body" itemprop="articleBody">
                      <p>HTTP严格传输安全（英语：HTTP Strict Transport Security，缩写：HSTS）是一套由互联网工程任务组发布的互联网安全策略机制。网站可以选择使用HSTS策略，来让浏览器强制使用HTTPS与网站进行通信，以减少会话劫持风险.</p>
                      <h3 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h3>
                      <p>HSTS的作用是强制客户端（如浏览器）使用HTTPS与服务器创建连接。服务器开启HSTS的方法是，当客户端通过HTTPS发出请求时，在服务器返回的超文本传输协议响应头中包含Strict-Transport-Security字段。非加密传输时设置的HSTS字段无效。</p>
                      <p>比如，<a href="https://example.com/" target="_blank" rel="noopener">https://example.com/</a> 的响应头含有Strict-Transport-Security: max-age=31536000; includeSubDomains。这意味着两点：</p>
                      <ol>
                        <li>在接下来的一年（即31536000秒）中，浏览器只要向example.com或其子域名发送HTTP请求时，必须采用HTTPS来发起连接。比如，用户点击超链接或在地址栏输入<a href="http://www.example.com/" target="_blank" rel="noopener">http://www.example.com/</a> ，浏览器应当自动将 http 转写成 https，然后直接向 <a href="https://www.example.com/" target="_blank" rel="noopener">https://www.example.com/</a> 发送请求。</li>
                        <li>在接下来的一年中，如果 example.com 服务器发送的TLS证书无效，用户不能忽略浏览器警告继续访问网站.</li>
                      </ol>
                      <h3 id="历史"><a href="#历史" class="headerlink" title="历史"></a>历史</h3>
                      <p>HSTS的雏形来自于2008年4月在北京召开的第十七届国际万维网大会上柯林·杰克逊（Collin Jackson）和亚当·巴斯（Adam Barth）的题为“ForceHTTPS: Protecting High-Security Web Sites from Network Attacks”的演讲。他们的提议是使用“ForceHTTPS” Cookie来强制浏览器使用HTTPS。</p>
                      <p>2009年9月18日，他们和杰夫·霍奇斯（Jeff Hodges）发布了最初的草案，题目为”Strict Transport Security”[5]，这个草案基于ForceHTTPS，并有所修改。</p>
                      <p>2010年6月17日，这三位作者经由互联网工程任务组发布了首版互联网草案，”HTTP Strict Transport Security”。</p>
                      <p>2012年10月2日，互联网工程指导组批准了将第14版HSTS草案发布为RFC的请求。</p>
                      <p>2012年11月19日，互联网工程任务组发布RFC 6797</p>
                      <h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3>
                      <p>HSTS可以用来抵御SSL剥离攻击。SSL剥离攻击是中间人攻击的一种，由Moxie Marlinspike于2009年发明。他在当年的黑帽大会上发表的题为“New Tricks For Defeating SSL In Practice”的演讲中将这种攻击方式公开。SSL剥离的实施方法是阻止浏览器与服务器创建HTTPS连接。它的前提是用户很少直接在地址栏输入 https:// ，用户总是通过点击链接或3xx重定向，从HTTP页面进入HTTPS页面。所以攻击者可以在用户访问HTTP页面时替换所有 https:// 开头的链接为 http:// ，达到阻止HTTPS的目的.</p>
                      <p>HSTS可以很大程度上解决SSL剥离攻击，因为只要浏览器曾经与服务器创建过一次安全连接，之后浏览器会强制使用HTTPS，即使链接被换成了HTTP。</p>
                      <p>另外，如果中间人使用自己的自签名证书来进行攻击，浏览器会给出警告，但是许多用户会忽略警告。HSTS解决了这一问题，一旦服务器发送了HSTS字段，用户将不再允许忽略警告。</p>
                      <h3 id="不足"><a href="#不足" class="headerlink" title="不足"></a>不足</h3>
                      <p>用户首次访问某网站是不受HSTS保护的。这是因为首次访问时，浏览器还未收到HSTS，所以仍有可能通过明文HTTP来访问。解决这个不足目前有两种方案，一是浏览器预置HSTS域名列表，Google Chrome、Firefox、Internet Explorer和Microsoft Edge实现了这一方案。二是将HSTS信息加入到域名系统记录中。但这需要保证DNS的安全性，也就是需要部署域名系统安全扩展。截至2014年这一方案没有大规模部署。</p>
                      <p>由于HSTS会在一定时间后失效（有效期由max-age指定），所以浏览器是否强制HSTS策略取决于当前系统时间。部分操作系统经常通过网络时间协议更新系统时间，如Ubuntu每次连接网络时，OS X Lion每隔9分钟会自动连接时间服务器。攻击者可以通过伪造NTP信息，设置错误时间来绕过HSTS。解决方法是认证NTP信息，或者禁止NTP大幅度增减时间。比如Windows 8每7天更新一次时间，并且要求每次NTP设置的时间与当前时间不得超过15小时。</p>
                      <h3 id="浏览器支持"><a href="#浏览器支持" class="headerlink" title="浏览器支持"></a>浏览器支持</h3>
                      <ul>
                        <li>Chromium和Google Chrome从4.0.211.0版本开始支持HSTS</li>
                        <li>Firefox 4及以上版本</li>
                        <li>Opera 12及以上版本</li>
                        <li>Safari从OS X Mavericks起</li>
                        <li>Internet Explorer从Windows 10技术预览版开始支持</li>
                      </ul>
                      <h3 id="网站支持"><a href="#网站支持" class="headerlink" title="网站支持"></a>网站支持</h3>
                      <p>根据SSL Pulse的调查，截至2015年2月，仅有2.7%的网站开启了HSTS。目前支持HSTS的主流网站有：支付宝、PayPal、Twitter、维基百科邮件列表、上善若水等。</p>
                      <blockquote>
                        <p>以上内容来自<a href="https://zh.wikipedia.org/wiki/HTTP%E4%B8%A5%E6%A0%BC%E4%BC%A0%E8%BE%93%E5%AE%89%E5%85%A8" target="_blank" rel="noopener">维基百科</a>,维基百科真是个好网站.</p>
                      </blockquote>
                      <h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3>
                      <p>啰嗦了这么多,其实就是为了凑字数.Nginx配置在ssl.conf文件中的server字段下添加如下代码:</p>

                      <!--kg-card-begin: code-->
                      <pre><code>add_header Strict-Transport-Security &quot;max-age=31536000; includeSubdomains; preload&quot;;//第二个跟第三个参数一般来说没用,支付宝的首页就只用了第一个参数.所以添加下面一行配置就行
add_header Strict-Transport-Security &quot;max-age=31536000;&quot;;</code></pre>

                      <!--kg-card-end: code-->
                      <p><strong>max-age</strong> ，单位是秒，用来告诉浏览器在指定时间内，这个网站必须通过 HTTPS 协议来访问。也就是对于这个网站的 HTTP 地址，浏览器需要先在本地替换为 HTTPS 之后再发送请求。</p>
                      <p><strong>includeSubDomains</strong> ，可选参数，如果指定这个参数，表明这个网站所有子域名也必须通过 HTTPS 协议来访问。</p>
                      <p><strong>preload</strong> ,将域名加入HSTS Preload List,但是有这个参数也不一定能加入.</p>
                      <p>HSTS 这个响应头只能用于 HTTPS 响应；网站必须使用默认的 443 端口；必须使用域名，不能是 IP。而且启用 HSTS 之后，一旦网站证书错误，用户无法选择忽略。</p>
                      <h3 id="配置生效"><a href="#配置生效" class="headerlink" title="配置生效"></a>配置生效</h3>
                      <p>最后打开 <strong>chrome://net-internals/#hsts</strong> ,在Query domain中输入自己的域名(不加http),搜索一下试试.往后,只要用户不清缓存,就会直接通过<a href="https://xxxx.com:443" target="_blank" rel="noopener">https://xxxx.com:443</a> 访问网站,而不是通过http重定向到https的方式了.</p>
                      <p><strong>–EOF–</strong></p>
                    </div>
                    <footer class="post-footer">
                      <div class="post-eof"></div>
                    </footer>
                  </div>
                </article>
              </div>
              <nav class="pagination">
                <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
              </nav>
            </div>
          </div>
          <div class="sidebar-toggle">
            <div class="sidebar-toggle-line-wrap">
              <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
              <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
              <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
            </div>
          </div>
          <aside class="sidebar">
            <div class="sidebar-inner">
              <ul class="sidebar-nav motion-element">
                <li class="sidebar-nav-toc">
                  文章目录
                </li>
                <li class="sidebar-nav-overview">
                  站点概览
                </li>
              </ul>

              <!--noindex-->
              <div class="post-toc-wrap sidebar-panel">
              </div> <!--/noindex-->
              <div class="site-overview-wrap sidebar-panel">
                <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
                  <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Optional">
                  <p class="site-author-name" itemprop="name">Optional</p>
                  <div class="site-description" itemprop="description"></div>
                </div>
                <div class="site-state-wrap motion-element">
                  <nav class="site-state">
                    <div class="site-state-item site-state-posts">
                      <a href="/archives/">
                        <span class="site-state-item-count">67</span>
                        <span class="site-state-item-name">日志</span>
                      </a>
                    </div>
                    <div class="site-state-item site-state-categories">
                      <a href="/categories/">
                        <span class="site-state-item-count">14</span>
                        <span class="site-state-item-name">分类</span>
                      </a>
                    </div>
                  </nav>
                </div>
              </div>
            </div>
          </aside>
          <div id="sidebar-dimmer"></div>
        </div>
      </main>
      <footer id="footer" class="footer">
        <div class="footer-inner">
          <div class="copyright"><a href="http://www.beian.miit.gov.cn" rel="noopener" target="_blank">鲁ICP备14023895号-1 </a>
            <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=" rel="noopener" target="_blank"> </a>&copy; 2014 – <span itemprop="copyrightYear">2019</span>
            <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
            <span class="author" itemprop="copyrightHolder">Optional</span>
          </div>
          <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
          <span class="post-meta-divider">|</span>
          <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.0</div>
        </div>
      </footer>
    </div>
    <script src="/lib/anime.min.js?v=3.1.0"></script>
    <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
    <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
    <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
    <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
    <script src="/js/utils.js?v=7.4.0"></script>
    <script src="/js/motion.js?v=7.4.0"></script>
    <script src="/js/schemes/pisces.js?v=7.4.0"></script>
    <script src="/js/next-boot.js?v=7.4.0"></script>
    <script src="/js/local-search.js?v=7.4.0"></script>
  </body>
</html>